"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mod=function(e,t){return"leaders"!==e?"":window.innerWidth<481&&t.selectedUserId&&t.users.findIndex((function(e){return e.id===t.selectedUserId}))?"with-chosen":void 0},setImage=function(e,t,r,n,a){var o=e.querySelector(".".concat(t));o.srcset="assets/images/".concat(r,".jpg 1.5x, assets/images/").concat(n),o.src="assets/images/".concat(n),o.alt=a},setLeader=function(e,t){var r=document.createElement("div");return r.classList.add("leaders__unit"),r.innerHTML='\n      <div class="leaders__user">\n        <span class="emoji leaders__emoji"></span>\n        <img class="userpic leaders__userpic" src="" alt="">\n        <p class="leaders__name"></p>\n        <p class="leaders__number caption pale"></p>\n      </div>\n      <div class="leaders__column"></div>\n  ',setImage(r,"leaders__userpic",e.id,e.avatar,e.name),r.querySelector(".leaders__name").innerHTML=e.name.split(" ").join("<br>"),r.querySelector(".leaders__number").innerHTML=e.valueText,r.querySelector(".leaders__column").innerHTML=t,r},renderLeaders=function(e){var t=document.createElement("div"),r=3;window.innerWidth>480&&window.innerWidth<1024?r=e.users.length<5?e.users.length:5:window.innerWidth>1023&&window.innerWidth<1920?r=e.users.length<7?e.users.length:7:window.innerWidth>1919&&(r=e.users.length<9?e.users.length:9);for(var n=0;n<r;n++){var a=setLeader(e.users[n],"".concat(n+1));e.selectedUserId&&e.selectedUserId===e.users[n].id&&(a.querySelector(".leaders__emoji").innerHTML="üëç"),0===n?(a.querySelector(".leaders__emoji").innerHTML+="".concat(e.emoji),a.querySelector(".leaders__column").classList.add("leaders__column_bright"),t.appendChild(a)):(a.classList.add("leaders__unit_top".concat(n+1)),n%2==1?(a.classList.add("leaders__unit_right"),t.appendChild(a)):(a.classList.add("leaders__unit_left"),t.prepend(a)))}if(e.selectedUserId){var o=e.users.findIndex((function(t){return t.id===e.selectedUserId}));if(o>r&&window.innerWidth<481){var i=document.createElement("div");i.className="leaders__user leaders__user_chosen",i.innerHTML='\n        <span class="emoji leaders__emoji">üëç</span>\n        <img class="userpic leaders__userpic" src="" alt="">\n        <p class="leaders__name">'.concat(e.users[o].name,'</p>\n        <p class="leaders__number caption">').concat(e.users[o].valueText,'</p>\n        <p class="leaders__position">').concat(o+1,"</p>\n      "),setImage(i,"leaders__userpic",e.users[o].id,e.users[o].avatar,e.users[o].name),t.appendChild(i)}}return t.innerHTML},renderVote=function(e){var t=document.createElement("div");t.innerHTML='\n    <button class="vote__button vote__button_up" id="button-up">\n      <svg>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M32 62C48.5685 62 62 48.5685 62 32C62 15.4315 48.5685 2 32 2C15.4315 2 2 15.4315 2 32C2 48.5685 15.4315 62 32 62ZM32 64C49.6731 64 64 49.6731 64 32C64 14.3269 49.6731 0 32 0C14.3269 0 0 14.3269 0 32C0 49.6731 14.3269 64 32 64ZM59 32C59 46.9117 46.9117 59 32 59C17.0883 59 5 46.9117 5 32C5 17.0883 17.0883 5 32 5C46.9117 5 59 17.0883 59 32ZM25.0607 27.9393C24.4749 27.3536 23.5251 27.3536 22.9393 27.9393C22.3536 28.5251 22.3536 29.4749 22.9393 30.0607L30.9393 38.0607C31.5251 38.6464 32.4749 38.6464 33.0607 38.0607L41.0607 30.0607C41.6464 29.4749 41.6464 28.5251 41.0607 27.9393C40.4749 27.3536 39.5251 27.3536 38.9393 27.9393L32 34.8787L25.0607 27.9393Z" fill=""/>\n      </svg>\n    </button>\n    <button class="vote__button vote__button_down" id="button-down">\n      <svg>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M32 62C48.5685 62 62 48.5685 62 32C62 15.4315 48.5685 2 32 2C15.4315 2 2 15.4315 2 32C2 48.5685 15.4315 62 32 62ZM32 64C49.6731 64 64 49.6731 64 32C64 14.3269 49.6731 0 32 0C14.3269 0 0 14.3269 0 32C0 49.6731 14.3269 64 32 64ZM59 32C59 46.9117 46.9117 59 32 59C17.0883 59 5 46.9117 5 32C5 17.0883 17.0883 5 32 5C46.9117 5 59 17.0883 59 32ZM25.0607 27.9393C24.4749 27.3536 23.5251 27.3536 22.9393 27.9393C22.3536 28.5251 22.3536 29.4749 22.9393 30.0607L30.9393 38.0607C31.5251 38.6464 32.4749 38.6464 33.0607 38.0607L41.0607 30.0607C41.6464 29.4749 41.6464 28.5251 41.0607 27.9393C40.4749 27.3536 39.5251 27.3536 38.9393 27.9393L32 34.8787L25.0607 27.9393Z" fill=""/>\n      </svg>\n    </button>\n  ';var r=0,n=window.innerWidth>480&&window.innerWidth<768?6:8;e.offset?(n=(r=e.users.findIndex((function(t){return t.id===e.offset})))+n,r?(t.querySelector("#button-up").setAttribute("data-action","update"),t.querySelector("#button-up").setAttribute("data-params",JSON.stringify({alias:"vote",data:{offset:e.users[r-1].id}}))):t.querySelector("#button-up").disabled=!0,r+n>=e.users.length?t.querySelector("#button-down").disabled=!0:(t.querySelector("#button-down").setAttribute("data-action","update"),t.querySelector("#button-down").setAttribute("data-params",JSON.stringify({alias:"vote",data:{offset:e.users[n].id}})))):(t.querySelector("#button-up").disabled=!0,n>=e.users.length?t.querySelector("#button-down").disabled=!0:(t.querySelector("#button-down").setAttribute("data-action","update"),t.querySelector("#button-down").setAttribute("data-params",JSON.stringify({alias:"vote",data:{offset:e.users[n].id}}))));for(var a=r;a<n;a++){var o=e.users[a];if(!e.users[a])break;var i=document.createElement("div");if(i.className="card vote__card",i.innerHTML='\n      <img \n        srcset="assets/images/'.concat(o.id,".jpg 1.5x, assets/images/").concat(o.avatar,'" \n        src="assets/images/').concat(o.avatar,'" alt="').concat(o.name,'" \n        class="userpic card__userpic">\n      <p class="card__name">').concat(o.name,"</p>\n    "),e.selectedUserId&&e.selectedUserId===o.id){var s=document.createElement("span");s.classList.add("emoji"),s.classList.add("card__emoji"),s.innerHTML="üëç",i.appendChild(s),i.classList.add("card_chosen")}else i.setAttribute("data-action","update"),i.setAttribute("data-params",JSON.stringify({alias:"leaders",data:{selectedUserId:o.id}}));t.appendChild(i)}return t.innerHTML},renderChart=function(e){var t=document.createElement("div");t.innerHTML='\n    <div class="chart__chart"></div>\n    <div class="chart__leaders"></div>\n  ';var r=t.querySelector(".chart__chart"),n=t.querySelector(".chart__leaders"),a=e.values.findIndex((function(e){return e.active})),o=a-6,i=a+2;window.innerWidth>767&&window.innerWidth<1024?o=a-7>0?a-7:0:window.innerWidth>1023&&window.innerWidth<1366?(o=a-8>0?a-8:0,i=a+3<e.values.length?a+3:e.values.length):window.innerWidth>1365&&window.innerWidth<1920?(o=a-12>0?a-12:0,i=a+3<e.values.length?a+3:e.values.length):window.innerWidth>1919&&(o=a-14>0?a-14:0,i=a+3<e.values.length?a+3:e.values.length);for(var s=0,c=o;c<=i;c++)e.values[c].value>s&&(s=e.values[c].value);for(var l=o;l<=i;l++){var d=e.values[l],u=document.createElement("div");u.className="chart__unit",u.innerHTML='\n      <p class="chart__number subtitle pale">'.concat(d.value?d.value:"",'</p>\n      <div class="chart__bar"></div>\n      <p class="chart__legend pale">').concat(d.title,"</p>\n    "),u.style.height=d.value/s*70+"%",l===a&&(u.querySelector(".chart__number").classList.remove("pale"),u.querySelector(".chart__bar").classList.add("chart__bar_current")),r.appendChild(u)}return e.users.forEach((function(t,r){if(!(window.innerWidth<1366&&2===r)){var a=e.users[r],o=document.createElement("div");o.className="chart__leader",o.innerHTML='\n      <img srcset=""\n           src=""\n           alt=""\n           class="userpic userpic_mini chart__userpic">\n      <div class="chart__text">\n        <p class="chart__leader-name">'.concat(a.name,'</p>\n        <p class="caption pale">').concat(a.valueText,"</p>\n      </div>\n    "),setImage(o,"chart__userpic",a.id,a.avatar,a.name),n.appendChild(o)}})),t.innerHTML};function arc(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Math.sin(e),o=Math.cos(e),i=Math.sin(t),s=Math.cos(t),c=t-e>Math.PI,l={x:r+r*a,y:r-r*o},d={x:r+r*i,y:r-r*s},u={x:r+n*i,y:r-n*s},p={x:r+n*a,y:r-n*o};return"M".concat(l.x,",").concat(l.y," \n  A").concat(r,",").concat(r," 0 ").concat(c?"1,1":"0,1"," ").concat(d.x,",").concat(d.y," \n  L").concat(u.x,",").concat(u.y," \n  A").concat(n,",").concat(n," 0 ").concat(c?"1,0":"0,0"," ").concat(p.x,",").concat(p.y,"\n   Z")}var renderDiagram=function(e){var t=document.body.classList.contains("theme_light")?"light":"dark",r=document.createElement("div");r.innerHTML='\n      <div class="diagram__donut-wrap">\n        <svg viewBox="0 0 2 2" class="diagram__donut">\n          <defs>\n            <radialGradient id="dark-0" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="72%" stop-color="rgba(255, 163, 0, 0.8)" />\n              <stop offset="100%" stop-color="rgba(91, 58, 0, 0.8)" />\n            </radialGradient>\n            <radialGradient id="dark-1" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="73%" stop-color="rgba(99, 63, 0, .5)" />\n              <stop offset="100%" stop-color="rgba(15, 9, 0, .5) 100%)" />\n            </radialGradient>\n            <radialGradient id="dark-2" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="72%" stop-color="rgb(155, 155, 155, 0.5)" />\n              <stop offset="100%" stop-color="rgb(56, 41, 0, 0.5)" />\n            </radialGradient>\n            <radialGradient id="dark-3" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="72%" stop-color="rgb(77, 77, 77, 0.5)" />\n              <stop offset="100%" stop-color="rgb(56, 41, 0, 0.5)" />\n            </radialGradient>\n\n            <radialGradient id="light-0" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="81.25%" stop-color="rgba(255, 184, 0, 0.52)" />\n              <stop offset="100%" stop-color="rgba(255, 239, 153, 0.32)" />\n            </radialGradient>\n            <radialGradient id="light-1" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="81.25%" stop-color="rgba(255, 184, 0, 0.24)" />\n              <stop offset="100%" stop-color="rgba(255, 239, 153, 0.12)" />\n            </radialGradient>\n            <radialGradient id="light-2" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="82.81%" stop-color="rgba(166, 166, 166, 0.1725)" />\n              <stop offset="100%" stop-color="rgba(203, 203, 203, 0.05)" />\n            </radialGradient>\n            <radialGradient id="light-3" fx="50%" fy=50% gradientUnits="userSpaceOnUse">\n              <stop offset="82.81%" stop-color="rgba(191, 191, 191, 0.345" />\n              <stop offset="100%" stop-color="rgba(228, 228, 228, 0.1)" />\n            </radialGradient>\n            \n            <filter id="shadow-dark-0" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n             <feGaussianBlur stdDeviation="0.12" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(255, 162, 0)" flood-opacity="0.9" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n            <filter id="shadow-dark-1" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n              <feGaussianBlur stdDeviation="0.12" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(202, 129, 0)" flood-opacity="0.9" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n            <filter id="shadow-dark-2" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n              <feGaussianBlur stdDeviation="0.12" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(139, 139, 139)" flood-opacity="0.9" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n            <filter id="shadow-dark-3" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n              <feGaussianBlur stdDeviation="0.12" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(38, 38, 38)" flood-opacity="0.9" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n            \n            <filter id="shadow-light-0" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n             <feGaussianBlur stdDeviation="0.12" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(255, 176, 57)" flood-opacity="0.9" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n            <filter id="shadow-light-1" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n              <feGaussianBlur stdDeviation="0.7" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(255, 176, 57)" flood-opacity="0.4" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n            <filter id="shadow-light-2" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n              <feGaussianBlur stdDeviation="2" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(105, 105, 105)" flood-opacity="0.3" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n            <filter id="shadow-light-3" primitiveUnits="objectBoundingBox" x="0%" y="0%">\n              <feGaussianBlur stdDeviation="0.3" result="offset-blur" />\n             <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" />\n             <feFlood flood-color="rgb(131, 131, 131)" flood-opacity="0.6" result="color" />\n             <feComposite operator="in" in="color" in2="inverse" result="shadow" />\n             <feComposite operator="over" in="shadow" in2="SourceGraphic" /> \n            </filter>\n          </defs>\n        </svg>\n        <div class="diagram__number">\n          <p class="diagram__value"></p>\n          <p class="diagram__change-value pale"></p>\n        </div>\n      </div>\n      <ul class="diagram__legend diagram-legend"></ul>\n  ',r.querySelector(".diagram__value").innerHTML=e.totalText.split(" ").join("<br>"),r.querySelector(".diagram__change-value").innerHTML=e.differenceText;var n=[];e.categories.forEach((function(e,t){n.push(Number.parseInt(e.valueText.split(" ")[0]));var a=document.createElement("li");a.className="diagram-legend__line",a.innerHTML='\n      <span class="diagram-legend__color diagram-legend__color_'.concat(t,'"></span>\n      <span class="diagram-legend__category">').concat(e.title,'</span>\n      <span class="diagram-legend__change-value pale">').concat(e.differenceText.split(" ")[0],'</span>\n      <span class="diagram-legend__value pale">').concat(e.valueText.split(" ")[0],"</span>\n    "),r.querySelector(".diagram-legend").appendChild(a)}));var a=n.reduce((function(e,t){return e+t})),o=r.querySelector(".diagram__donut");o.style.transform="rotate(-".concat(360*n[0]/a/2,"deg)");var i=0;return n.forEach((function(e,r){var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("r","1"),s.setAttribute("fill","url(#".concat(t,"-").concat(r,")")),s.setAttribute("filter","url(#shadow-".concat(t,"-").concat(r,")"));var c=arc(i,i+=n[r]*Math.PI*2/a-.0174533,1,.7);s.setAttribute("d",c),o.prepend(s),i+=.0174533})),r.innerHTML},setActivityBar=function(e,t,r){var n=document.body.classList.contains("theme_light")?"light":"dark",a=document.createElement("img"),o=Math.ceil(t/r)<3?Math.ceil(t/r):3,i="".concat(["min","mid","max","extra"][o],"-").concat(n);a.srcset="assets/images/".concat(i,"@2x.png 1.5x, assets/images/").concat(i,".png"),a.src="assets/images/".concat(i,".png"),a.alt=t,e.appendChild(a)},renderActivity=function(e){var t=document.createElement("div");t.innerHTML='\n    <div class="activity__grid"></div>\n    <div class="activity__legend activity-legend">\n      <div class="activity-legend__unit">\n        <div class="activity-legend__color activity-legend__color_size"></div>\n        <p class="activity-legend__text pale">1 —á–∞—Å</p>\n      </div>\n    </div>\n  ';var r=t.querySelector(".activity__grid"),n=t.querySelector(".activity__legend"),a=window.innerWidth>480&&window.innerWidth<1366,o=e.data,i=[];if(a){for(var s in o){for(var c=[],l=1;l<=o[s].length;l+=2){var d=o[s][l]?o[s][l]+o[s][l-1]:o[s][l-1];c.push(d)}i[s]=c}t.querySelector(".activity-legend__text").innerHTML="2 —á–∞—Å–∞"}var u=0,p=a?i:o;for(var f in p)o[f].forEach((function(e){e>u&&(u=e)}));for(var v=Math.floor(u/3),_=0;_<4;_++){var m="";switch(_){case 0:m="0";break;case 1:m=1===v?"1":"1‚Äâ‚Äî‚Äâ".concat(_+v-1);break;case 2:if(1===v)m="2";else{var h=Math.floor((_-1)*u/3)+1;m="".concat(h,"‚Äâ‚Äî‚Äâ").concat(h+v-1)}break;case 3:var g=Math.floor((_-1)*u/3)+1;u%3==2&&(g=Math.floor((_-1)*u/3)),m="".concat(g,"‚Äâ‚Äî‚Äâ").concat(u)}var y=document.createElement("div");y.className="activity-legend__unit",y.innerHTML='\n      <div class="activity-legend__color activity-legend__color_'.concat(_,'"></div>\n      <p class="activity-legend__text pale">').concat(m,"</p>\n    "),n.appendChild(y)}if(window.innerWidth<window.innerHeight){var b=[];for(var w in o)b.push.apply(b,_toConsumableArray(o[w]));for(var C=0;C<o.mon.length;C++){var S=document.createElement("div");S.classList.add("activity__grid-row"),S.id="row-".concat(C),r.appendChild(S)}for(var L=0;L<b.length;L++){var x=document.createElement("div");x.classList.add("activity__grid-cell"),setActivityBar(x,b[L],v),t.querySelector("#row-".concat(Math.floor(L%o.mon.length))).appendChild(x)}}else if(a){var M=[];for(var T in i)M.push(i[T]);for(var G=0;G<7;G++){var A=document.createElement("div");A.classList.add("activity__grid-row"),r.appendChild(A);for(var U=0;U<M[0].length;U++){var q=document.createElement("div");q.classList.add("activity__grid-cell"),setActivityBar(q,M[G][U],v),A.appendChild(q)}}}else{var B=[];for(var H in o)B.push.apply(B,_toConsumableArray(o[H]));for(var I=0;I<7;I++){var E=document.createElement("div");E.classList.add("activity__grid-row"),E.id="row-".concat(I),r.appendChild(E)}for(var j=0;j<B.length;j++){var k=document.createElement("div");k.classList.add("activity__grid-cell"),setActivityBar(k,B[j],v),t.querySelector("#row-".concat(Math.floor(j/o.mon.length))).appendChild(k)}}return t.innerHTML};window.renderTemplate=function(e,t){var r;switch(e){case"leaders":r=renderLeaders;break;case"vote":r=renderVote;break;case"chart":r=renderChart;break;case"diagram":r=renderDiagram;break;case"activity":r=renderActivity}return'\n    <div id="anchor" class="anchor">\n      <h1 class="title title_main" id="main-title">'.concat(t.title,'</h1>\n      <p class="subtitle_main pale" id="subtitle">').concat(t.subtitle,'</p>\n      <div class="container ').concat(e," ").concat(e,"_").concat(mod(e,t),'">').concat(r(t),"</div>\n    </div>\n  ")};